{% extends "_base.html" %}
{% block content %}
  {% if not gmg_ok %}
    <p style="color: red">
      Вы не зашли на дискорд сервер, для получения полного функционала,
      пожалуйста, присоединитесь к
      <a href="https://discord.gg/sPR62FDQQz" target="_blank">серверу</a>
    </p>
  {% endif %} 
  {% if user_id["status"] == 1 %}
    <p style="color: red">
      Ваша заявка рассматривается. По всем вопросам, пожалуйста,
      обращайтесь в
      <a href="https://discord.gg/sPR62FDQQz" target="_blank">дискорд</a>
    </p>
  {% elif user_id["status"] == 2 %}
    <p>Вы игрок сервера. Приятной игры {{user.name + "#" + user.discriminator}}</p>
    <p>Адрес сервера - mine.gmgame.ru</p>

    {% if users["id"] %}
      <p>Ожидающие заявки</p>
      <table>
        <tr>
          <th>ID</th>
          <th>Username</th>
          <th>Возраст</th>
        </tr>
        {% for us in users %}
          <tr>
            <td>{{ us[0] }}</td>
            <td>{{ us[1] }}</td>
            <td>{{ us[2] }}</td>
          </tr>
        {% endfor %}
      </table>
    {% endif %}

    <h4>Мои метки</h4>
    <div id="add_marker_res"></div>
    <table id="metki">
      <thead>
        <tr>
          <th id="table-one">Мир</th>
          <th id="table-two">Расположение</th>
          <th id="table-three">Имя</th>
          <th id="table-four">X</th>
          <th id="table-five">Y</th>
          <th id="table-six">Z</th>
          <th id="table-seven">Описание</th>
          <th id="table-eight">Добавить</th>
          <th id="table-nine">Удалить</th>
        </tr>
      </thead>
      <tbody id="metki_tbody">
        {% for marker in markers %}
        <tr id="tr-{{ marker.id }}">
          <th id="table-one">
            <select name="server" id="server-{{ marker.id }}">
              <option value="gmgame" {% if marker.server=='gmgame' %} selected="selected" {% endif %}>Основной мир</option>
              <option value="farm" {% if marker.server=='farm' %} selected="selected" {% endif %}>Фермерский мир</option>
            </select>
          </th>
          <th id="table-two">
            <select name="id_type" id="id_type-{{ marker.id }}">
              <option value="basePlayers" {% if marker.id_type=='basePlayers' %} selected="selected" {% endif %}>Базыи гроков - over</option>
              <option value="city" {% if marker.id_type=='city' %} selected="selected" {% endif %}>Города - over</option>
              <option value="shopping_centers" {% if marker.id_type=='shopping_centers' %} selected="selected" {% endif %}>Торговые центры - over</option>
              <option value="turquoise" {% if marker.id_type=='turquoise' %} selected="selected" {% endif %}>Бирюзовая - nether</option>
              <option value="orange" {% if marker.id_type=='orange' %} selected="selected" {% endif %}>Оранжевая - nether</option>
              <option value="lime" {% if marker.id_type=='lime' %} selected="selected" {% endif %}>Лаймовая - nether</option>
              <option value="pink" {% if marker.id_type=='pink' %} selected="selected" {% endif %}>Розовая - nether</option>
              <option value="farm" {% if marker.id_type=='farm' %} selected="selected" {% endif %}>Фермы - nether</option>
              <option value="end_portals" {% if marker.id_type=='end_portals' %} selected="selected" {% endif %}>Энд порталы - nether</option>
              <option value="pixel_arts" {% if marker.id_type=='pixel_arts' %} selected="selected" {% endif %}>Пиксель арты - end</option>
            </select>
          </th>
          <th id="table-three"><input type="text" placeholder="{{ marker.name }}" name="name" id="name-{{ marker.id }}"
              value="{{ marker.name }}"></th>
          <th id="table-four"><input type="text" placeholder="{{ marker.x }}" name="x" id="x-{{ marker.id }}"
              value="{{ marker.x }}"></th>
          <th id="table-five"><input type="text" placeholder="{{ marker.y }}" name="y" id="y-{{ marker.id }}"
              value="{{ marker.y }}"></th>
          <th id="table-six"><input type="text" placeholder="{{ marker.z }}" name="z" id="z-{{ marker.id }}"
              value="{{ marker.z }}"></th>
          <th id="table-seven"><input type="text" placeholder="{{ marker.description }}" name="description"
              id="description-{{ marker.id }}" {% if marker.description %} value="{{ marker.description }}" {% endif
              %}></th>
          <th id="table-eight"><button id="edit-{{ marker.id }}">Изменить</button></th>
          <th id="table-nine"><button id="del-{{ marker.id }}">Удалить</button></th>
        </tr>
        {% endfor %}
      </tbody>
    </table>
    <table id="add_metki">
      <tr>
        <th id="table-one">
          <select name="add_server" id="add_server">
            <option value="gmgame">Основной мир</option>
            <option value="farm">Фермерский мир</option>
          </select>
        </th>
        <th id="table-two">
          <select name="add_id_type" id="add_id_type">
            <option value="basePlayers">Базы игроков</option>
            <option value="city">Города</option>
            <option value="shopping_centers">Торговые центры - over</option>
            <option value="turquoise">Бирюзовая - nether</option>
            <option value="orange">Оранжевая - nether</option>
            <option value="lime">Лаймовая - nether</option>
            <option value="pink">Розовая - nether</option>
            <option value="farm">Фермы - nether</option>
            <option value="end_portals">Энд порталы - nether</option>
            <option value="pixel_arts">Пиксель арты - end</option>
          </select>
        </th>
        <th id="table-three"><input type="text" placeholder="text" name="add_name" id="add_name"></th>
        <th id="table-four"><input type="text" placeholder="0000" name="add_x" id="add_x"></th>
        <th id="table-five"><input type="text" placeholder="0000" name="add_y" id="add_y"></th>
        <th id="table-six"><input type="text" placeholder="0000" name="add_z" id="add_z"></th>
        <th id="table-seven"><input type="text" placeholder="text-text" name="add_description" id="add_description"></th>
        <th id="table-eight"><button id="add">Добавить</button></th>
        <th id="table-nine"></th>
      </tr>
    </table>


  {% elif user_id["status"] == 3 %}
    <p>
      к сожалению вашей заявке отказано. За подробновстями вы можете
      обратиться в
      <a href="https://discord.gg/sPR62FDQQz" target="_blank">дискорд</a>
    </p>
  {% else %}
    <div class="register-form">
      <h3>Заявка</h3>
      <div id="res"></div>
      <!--Логин-->
      <span class="input-name">Логин</span>
      <input id="login" type="input" name="login" placeholder="Игровой ник" />
      <!--Пароль-->
      <span class="input-name">Пароль</span>
      <input id="password" type="input" name="password" placeholder="123456789" />
      <!--Лицензия/пиратка-->
      <span class="input-name">Тип акаунта</span>
      <select name="tupe" id="type">
        <option value="1">Лицензия</option>
        <option value="0">Пиратка</option>
      </select>
      <!--возраст-->
      <span class="input-name">Возраст</span>
      <input id="age" type="input" name="age" placeholder="16" />
      <!--о проекте-->
      <span class="input-name">Откуда узнали о проекте</span>
      <textarea name="from_about" id="from_about" cols="auto" rows="auto"></textarea>
      <!--о себе-->
      <span class="input-name">Интересы в майнкрафт</span>
      <textarea name="you_about" id="you_about" cols="auto" rows="auto"></textarea>
      <!--опыт игры на других серверах-->
      <span class="input-name">Прошлые сервера</span>
      <textarea name="servers" id="servers" cols="auto" rows="auto"></textarea>
      <button id="register" class="register-btn-next">
        Отправить заявку
      </button>
    </div>
  {% endif %}
{% endblock %}
{% block js_scripts %}
    {{ super() }}
    <script src="/static/js/add_markers.js"></script>
{% endblock %}